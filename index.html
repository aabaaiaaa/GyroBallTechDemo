<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Prevent pinch-zoom and double-tap zoom on mobile; viewport-fit=cover enables safe-area-inset-* -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#111111" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Gyro Balls</title>

  <!-- Matter.js physics engine via CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"
          integrity="sha512-0z8URjGET3GPSoTGBxpQ7dFOJSyaGREbMG7sGHkuFKrm3xf3SfbXqIfEIzJ1+1vHkLN/qIMEJy+smDWQ0PZUQ=="
          crossorigin="anonymous"
          referrerpolicy="no-referrer"></script>

  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <!-- Full-screen canvas for Matter.js renderer -->
  <canvas id="world"></canvas>

  <!-- iOS permission prompt (hidden by default, shown by js/gyroscope.js when needed) -->
  <div id="permission-overlay" class="overlay hidden" aria-modal="true" role="dialog" aria-labelledby="permission-title">
    <div class="overlay-card">
      <h1 id="permission-title">Motion Access Required</h1>
      <p>This demo uses your device's gyroscope to control gravity.<br>Please allow motion access to continue.</p>
      <button id="btn-enable-motion" class="btn-primary">Enable Motion</button>
    </div>
  </div>

  <!-- Countdown overlay (shown during shake-to-reset, managed by js/reset.js) -->
  <div id="countdown-overlay" class="overlay hidden" aria-live="assertive">
    <span id="countdown-number" class="countdown-number"></span>
  </div>

  <!-- Settings panel -->
  <div id="settings-panel" class="settings-panel hidden" role="dialog" aria-label="Settings">
    <h2 class="settings-title">Settings</h2>

    <label class="settings-row" for="ball-count">
      <span>Balls</span>
      <input id="ball-count" type="range" min="1" max="30" value="10" />
      <span id="ball-count-display" class="settings-value">10</span>
    </label>

    <label class="settings-row" for="toggle-sound">
      <span>Sound</span>
      <input id="toggle-sound" type="checkbox" checked />
    </label>

    <label class="settings-row" for="toggle-vibration">
      <span>Vibration</span>
      <input id="toggle-vibration" type="checkbox" checked />
    </label>
  </div>

  <!-- Gear icon button (bottom-right) -->
  <button id="btn-settings" class="btn-settings" aria-label="Open settings" aria-expanded="false">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24" aria-hidden="true">
      <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.92c.04-.34.07-.68.07-1.08s-.03-.74-.07-1.08l2.3-1.77c.21-.16.27-.46.13-.7l-2.18-3.78a.553.553 0 0 0-.68-.22l-2.72 1.1c-.56-.43-1.17-.79-1.84-1.06l-.41-2.9c-.05-.26-.28-.44-.55-.44h-4.36c-.27 0-.5.18-.55.44l-.41 2.9C7.9 5.51 7.29 5.87 6.73 6.3L4.01 5.2a.553.553 0 0 0-.68.22L1.15 9.2c-.14.24-.08.54.13.7l2.3 1.77c-.04.34-.07.69-.07 1.08s.03.74.07 1.08l-2.3 1.77c-.21.16-.27.46-.13.7l2.18 3.78c.14.24.44.31.68.22l2.72-1.1c.56.43 1.17.79 1.84 1.06l.41 2.9c.05.26.28.44.55.44h4.36c.27 0 .5-.18.55-.44l.41-2.9c.67-.27 1.28-.63 1.84-1.06l2.72 1.1c.24.09.54.02.68-.22l2.18-3.78c.14-.24.08-.54-.13-.7l-2.3-1.77z"/>
    </svg>
  </button>

  <!-- Mouse-mode indicator (shown when gyroscope is unavailable) -->
  <div id="mouse-mode-label" class="mouse-mode-label hidden">Mouse mode</div>

  <!-- Application entry point (ES module so physics.js can be imported) -->
  <script type="module" src="js/main.js"></script>
</body>
</html>
